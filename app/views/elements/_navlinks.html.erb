<% mobile_nav ||= false %>
<% if defined?(Devise) %>
<% if user_signed_in? %>

<% budgets ||= current_user.budgets.order(:created_at) %>

<% if mobile_nav %>
<li class="uk-parent ">
    <%= link_to 'Budgets', '#' %>

    <ul class="uk-nav-sub">
    <li class="uk-nav-header">My Budgets</li>
    <% budgets.each do |budget| %>
    <li class="<%= active_class edit_budget_path(budget) %>">
        <%= link_to budget.name, edit_budget_path(budget) %>
    </li>
    <% end %>
    <li class="uk-nav-divider"></li>
    <li class="<%= active_class budgets_path %>">
        <%= link_to "All Budgets", budgets_path %>
    </li>
    <li class="<%= active_class new_budget_path %>">
        <%= link_to "New Budget", new_budget_path %>
    </li>
</ul>

</li>
<% else %>
<li class="uk-parent <%= active_class if controller.controller_name.eql? 'budgets' %>" data-uk-dropdown="{mode:'hover'}" aria-haspopup="true" aria-expanded="false">
<%= link_to 'Budgets', '' %>

<div class="uk-dropdown uk-dropdown-navbar uk-dropdown-bottom" aria-hidden="true" tabindex="" style="top: 40px; left: 0px;">
    <ul class="uk-nav uk-nav-navbar">

        <li class="uk-nav-header">My Budgets</li>
        <li class="<%= active_class budgets_path %>">
            <%= link_to "All Budgets", budgets_path %>
        </li>
        <% budgets.each do |budget| %>
        <li class="<%= active_class edit_budget_path(budget) %>">
            <%= link_to budget.name, edit_budget_path(budget) %>
        </li>
        <% end %>

        <li class="uk-nav-divider"></li>
        <li class="<%= active_class new_budget_path %>">
            <%= link_to "New Budget", new_budget_path %>
        </li>
    </ul>
</div>

</li>
<% end %>
<li class="<%= active_class(dashboard_path) %>">
<%= link_to dashboard_path do %>

<% if !mobile_nav %>
<i title="Dashboard" class="fa fa-dashboard fa-fw"></i>
Dashboard
<% else %>Dashboard<% end %>
<% end %>
</li>
<li class="<%= active_class(edit_user_registration_path) %>">
<%= link_to edit_user_registration_path do %>

<% if !mobile_nav %>
<i title="Account" class="fa fa-user fa-fw"></i>
<% else %>Account<% end %>
<% end %>
</li>
<li class="<%= active_class(destroy_user_session_path) %>">
<%= link_to destroy_user_session_path, method: :delete do %>

<% if !mobile_nav %>
<i title="Sign Out" class="fa fa-lock fa-fw"></i>
<% else %>Sign Out<% end %>
<% end %>
</li>
<% else %>
<li class="<%= active_class(new_user_session_path) %>">
<%= link_to new_user_session_path do %>
Sign In
<% end %>
</li>
<li class="<%= active_class(new_user_registration_path) %>">
<%= link_to new_user_registration_path do %>
Sign Up
<% end %>
</li>
<% end %>
<% end %>